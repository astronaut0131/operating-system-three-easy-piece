# Ch15 Homework
### Q1: Run with seeds 1, 2, and 3, and compute whether each virtual address generated by the process is in or out of bounds. If in bounds, compute the translation.
A1:
Seed 1
```
Base-and-Bounds register information:

  Base   : 0x0000363c (decimal 13884)
  Limit  : 290

Virtual Address Trace
  VA  0: 0x0000030e (decimal:  782) --> PA or segmentation violation?
  VA  1: 0x00000105 (decimal:  261) --> PA or segmentation violation?
  VA  2: 0x000001fb (decimal:  507) --> PA or segmentation violation?
  VA  3: 0x000001cc (decimal:  460) --> PA or segmentation violation?
  VA  4: 0x0000029b (decimal:  667) --> PA or segmentation violation?

```
 
VA0: segmentation violation
VA1: physical address: 0x00003741(decimal:14145)
VA2: segmentation violation
VA3: segmentation violation
VA4: segmentation violation
Seed 2
```
Base-and-Bounds register information:

  Base   : 0x00003ca9 (decimal 15529)
  Limit  : 500

Virtual Address Trace
  VA  0: 0x00000039 (decimal:   57) --> PA or segmentation violation?
  VA  1: 0x00000056 (decimal:   86) --> PA or segmentation violation?
  VA  2: 0x00000357 (decimal:  855) --> PA or segmentation violation?
  VA  3: 0x000002f1 (decimal:  753) --> PA or segmentation violation?
  VA  4: 0x000002ad (decimal:  685) --> PA or segmentation violation?
```
VA0: physical address:0x00003ce2 (decimal 15586)
VA1: physical address:0x00003cff (decimal 15615)
VA2: segmentation violation
VA3: segmentation violation
VA4: segmentation violation
Seed 3
```
  Base   : 0x000022d4 (decimal 8916)
  Limit  : 316

Virtual Address Trace
  VA  0: 0x0000017a (decimal:  378) --> PA or segmentation violation?
  VA  1: 0x0000026a (decimal:  618) --> PA or segmentation violation?
  VA  2: 0x00000280 (decimal:  640) --> PA or segmentation violation?
  VA  3: 0x00000043 (decimal:   67) --> PA or segmentation violation?
  VA  4: 0x0000000d (decimal:   13) --> PA or segmentation violation?
```
VA0: segmentation violation
VA1: segmentation violation
VA2: segmentation violation
VA3: physical address: 0x00002317 (decimal: 8983)
VA4: physical address: 0x000022e1 (decimal: 8929)
### Q2:Run with these flags: -s 0 -n 10. What value do you have set -l (the bounds register) to in order to ensure that all the generated virtual addresses are within bounds?
A2:
```
Virtual Address Trace
  VA  0: 0x000001ae (decimal:  430) --> PA or segmentation violation?
  VA  1: 0x00000109 (decimal:  265) --> PA or segmentation violation?
  VA  2: 0x0000020b (decimal:  523) --> PA or segmentation violation?
  VA  3: 0x0000019e (decimal:  414) --> PA or segmentation violation?
  VA  4: 0x00000322 (decimal:  802) --> PA or segmentation violation?
  VA  5: 0x00000136 (decimal:  310) --> PA or segmentation violation?
  VA  6: 0x000001e8 (decimal:  488) --> PA or segmentation violation?
  VA  7: 0x00000255 (decimal:  597) --> PA or segmentation violation?
  VA  8: 0x000003a1 (decimal:  929) --> PA or segmentation violation?
  VA  9: 0x00000204 (decimal:  516) --> PA or segmentation violation?
```
The bound limit must > 929

### Q3:Run with these flags: -s 1 -n 10 -l 100. What is the maximum value that base can be set to, such that the address space still fits into physical memory in its entirety?
A3:
```
ARG address space size 1k
ARG phys mem size 16k
```
So the maximum value of base = 16k - 1k = 15k, not sure about this answer, have no idea whether -l 100 has something to do with the answer.

### Q5:What fraction of randomly-generated virtual addresses are valid, as a function of the value of the bounds register? Make a graph from running with different random seeds, with limit values ranging from 0 up to the maximum size of the address space. 
A5: Write a python script to do it!
```
import os
import matplotlib.pyplot as plt
for seed in range(1): // change seed here
    valid_rate = []
    limit_list = []
    result = os.popen('python relocation.py -s {}'.format(seed)).read().split('\n')
    result = [item for item in result if item]
    limit_range = [int(item.split('ARG address space size ')[1].replace('k','')) for item in result if item.startswith(
        "ARG address space size ")][0] * 1024
    for limit in range(limit_range+1):
        command_result = os.popen('python relocation.py -s {} -l {} -c'.format(seed,limit)).read().split('\n')
        VA_result = [item for item in command_result if item and 'VA' in item]
        valid = len([item for item in VA_result if 'VALID' in item])
        valid_rate.append(valid/len(VA_result))
        limit_list.append(limit)
        print(len(valid_rate))
    plt.plot(valid_rate,limit_list)
    plt.xlabel("valid rate")
    plt.ylabel("limit")
    plt.show()
```

Seed 1 graph:
![](Ch15%20Homework/FF35723B-6314-4BBC-A5B0-95B96BA9AB3F.png)